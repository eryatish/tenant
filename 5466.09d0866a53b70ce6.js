"use strict";(self.webpackChunktenantUI=self.webpackChunktenantUI||[]).push([[5466],{6217:(y,b,u)=>{u.d(b,{v:()=>i});const i="5.6.1"},3100:(y,b,u)=>{u.d(b,{t:()=>v});var i=u(6217),l=u(4476);const n=/^ng-|^_ng-/g;function v(k){if(!k)return;const p=k.tagName.toLowerCase(),{hostname:F,pathname:_}=window.location,r={version:i.v,selector:p,hostname:F,pathname:_},e=Array.from(k.attributes).slice(0,10);for(let t=0;t<e.length;t++){const o=e[t];let s=o.name;s=(0,l.e)(s),n.lastIndex=0,!n.test(s)&&(r[s]=o.value)}window.pendo&&window.pendo.isReady&&window.pendo.isReady()&&window.pendo.track(p,r)}},5466:(y,b,u)=>{u.r(b),u.d(b,{ukg_upload:()=>_});var i=u(5861),l=u(337),n=u(4476),v=u(267),k=u(4158),p=u(3100);const _=class{constructor(r){(0,l.r)(this,r),this.ukgUploadFileRemoved=(0,l.c)(this,"ukgUploadFileRemoved",7),this.ukgUploadFileCleared=(0,l.c)(this,"ukgUploadFileCleared",7),this.ukgUploadFileAborted=(0,l.c)(this,"ukgUploadFileAborted",7),this.ukgUploadFileBulkRemoved=(0,l.c)(this,"ukgUploadFileBulkRemoved",7),this.ukgUploadFileSubmitted=(0,l.c)(this,"ukgUploadFileSubmitted",7),this.ukgUploadFileLoadingFinished=(0,l.c)(this,"ukgUploadFileLoadingFinished",7),this.ukgUploadFileErrorGenerated=(0,l.c)(this,"ukgUploadFileErrorGenerated",7),this.ukgUploadAllErrorsCleared=(0,l.c)(this,"ukgUploadAllErrorsCleared",7),this.mockUrlSuccess="ukg-mock-success",this.fileError=new WeakMap,this.internalError=!1,this.maxNumberOfFilesReached=!1,this.maxNumberOfFilesPassed=!1,this.filesItems=new Map,this.fileControllers=new WeakMap,this.uploadedFiles=[],this.pendingFiles=new WeakSet,this.id=(0,n.h)("upload"),this.imageMap={},this.numberOfFilesInProgress=0,this._t=n.j.get("_t"),this.files=[],this.hasError=!1,this.error=!1,this.icon="upload",this.disabled=!1,this.name="file",this.maxNumberOfFiles=null,this.maxFileSize=null,this.url="",this.fetchOptions={method:"POST"},this.check=()=>!0,this.checkResponse=(e,t,o,s)=>!(!t?.ok||null!==o)||(s("upload",{message:(0,n.i)(this._t,"UPLOAD.UPLOAD_FAIL.message")}),!1),this.largeHeight=!1,this.noIcons=!1,this.allowThumbnails=!1,this.uploadFileRemovedCallback=()=>{},this.uploadFileClearedCallback=()=>{},this.uploadFileAbortedCallback=()=>{}}onDropzoneChanged(){var r=this;return(0,i.Z)(function*(){const e=yield r.dropzone.getFiles();r.files=[...e],r.updateInternalStates()})()}onUploadFileLoaded(r){var e=this;return(0,i.Z)(function*(){const t=r.detail,o=e.files.find(s=>s.name===t.fileName&&s.size===t.fileSize&&s.type===t.fileType);typeof o>"u"?t.remove():(e.filesItems.set(o,t),null!==e.maxNumberOfFiles&&e.files.length>=e.maxNumberOfFiles&&(yield e.dropzone.focusInnerContent()),null===e.maxNumberOfFiles||e.files.length<=e.maxNumberOfFiles?e.processFile(o):(yield e.checkFile(o),e.renderErrors(t,e.fileError.get(o))))})()}fileErrorGenerated(){this.updateInternalStates()}uploadFiles(r,e=!1){var t=this;return(0,i.Z)(function*(){e&&t.uploadedFiles.push(...r),t.files=[...t.files,...r],yield t.dropzone.setFiles(t.files,r.length),t.updateInternalStates()})()}clearFiles(){var r=this;return(0,i.Z)(function*(){r.files=[],yield r.dropzone.clearFiles(),r.updateInternalStates()})()}deleteFiles(){var r=this;return(0,i.Z)(function*(){const e=r.uploadedFiles;return r.uploadedFiles=[],r.updateInternalStates(),r.ukgUploadFileBulkRemoved.emit(),e})()}getFiles(){var r=this;return(0,i.Z)(function*(){return r.files})()}getNumberOfFilesInProgress(){var r=this;return(0,i.Z)(function*(){return r.numberOfFilesInProgress})()}uploadHasError(){var r=this;return(0,i.Z)(function*(){return r.hasError})()}addErrorToFile(r,e,t){var o=this;return(0,i.Z)(function*(){if(o.filesItems.has(r)){const s=o.filesItems.get(r),c=o.fileError.get(r);return c.set(e,t),o.cleanErrors(s),o.renderErrors(s,c),o.updateInternalStates(),c}})()}componentDidRender(){this.updateInternalStates()}componentDidLoad(){(0,v.a)(this.el.shadowRoot,!0),(0,p.t)(this.el)}createError(r,e){const t=document.createElement("ukg-assistive-message");return t.setAttribute("slot","error"),t.id=r,t.type="error",t.innerHTML=e.message,this.ukgUploadFileErrorGenerated.emit(),t}renderErrors(r,e){if(typeof e>"u"||e.size<1)return;const t=document.createDocumentFragment();e.forEach((c,a)=>{t.appendChild(this.createError(`${r.id}-${a}-error`,c))});const o=this.getButton(r,"retry"),s=-1===[...e.values()].findIndex(c=>!1===c.allowRetry);o&&(s?(o.style.display=null,o.disabled=this.disabled):(o.style.display="none",o.disabled=!0)),r.appendChild(t),r.progress=!1,r.error=!0}cleanErrors(r){r.querySelectorAll('[slot="error"]').forEach(e=>e.remove()),r.error=!1}getButton(r,e){return r.querySelector(`#${r.id}-${e}[slot="action"]`)}attachError(r,e,t){this.fileError.has(r)||this.fileError.set(r,new Map);const o=this.fileError.get(r);null===t?o.delete(e):o.set(e,t)}processFile(r){var e=this;return(0,i.Z)(function*(){if(e.uploadedFiles.includes(r)||e.pendingFiles.has(r))return!1;e.ukgUploadFileSubmitted.emit(r),e.pendingFiles.add(r),0===e.numberOfFilesInProgress&&e.el.setAttribute("ukg-in-progress",""),e.numberOfFilesInProgress+=1;const t=e.filesItems.get(r);e.fileError.set(r,new Map),e.cleanErrors(t);const o=(d,g)=>e.attachError(r,d,g),c=function(){var d=(0,i.Z)(function*(g,m=null){return yield e.checkResponse(r,g,m,o)});return function(m){return d.apply(this,arguments)}}();if(!(yield e.checkFile(r)))return e.renderErrors(t,e.fileError.get(r)),e.pendingFiles.delete(r),e.numberOfFilesInProgress-=1,0===e.numberOfFilesInProgress&&e.el.removeAttribute("ukg-in-progress"),e.updateInternalStates(),!1;const a=new FormData;a.append("file",r),t.progress="indeterminate";const h=e.getButton(t,"retry"),E=e.getButton(t,"delete"),f=e.getButton(t,"clear"),O=(new Date).getTime(),U=(d=0)=>{e.pendingFiles.delete(r),setTimeout(()=>{e.renderErrors(t,e.fileError.get(r)),t.progress=!1,e.ukgUploadFileLoadingFinished.emit(r),e.numberOfFilesInProgress-=1,0===e.numberOfFilesInProgress&&e.el.removeAttribute("ukg-in-progress")},Math.max(0,750-d))},I=(d=0)=>{h&&(h.style.display="none"),f&&(f.disabled=!0),e.pendingFiles.delete(r),e.uploadedFiles.push(r),setTimeout(()=>{f&&(f.style.display="none"),E&&(E.style.display=null),t.progress=1,e.ukgUploadFileLoadingFinished.emit(r),e.numberOfFilesInProgress-=1,0===e.numberOfFilesInProgress&&e.el.removeAttribute("ukg-in-progress")},Math.max(0,750-d))};try{if(e.url===e.mockUrlSuccess)return I(),!0;const d=new AbortController;e.fileControllers.set(r,d);const g=yield fetch(e.url,Object.assign(Object.assign({},e.fetchOptions),{signal:d.signal,body:a})),m=(new Date).getTime()-O,D=yield c(g);return D?I(m):U(m),D}catch(d){const g=(new Date).getTime()-O;return"AbortError"===d.name&&(e.ukgUploadFileAborted.emit({file:r}),e.uploadFileAbortedCallback()),yield c(null,d),U(g),!1}})()}updateInternalStates(){null===this.maxNumberOfFiles?(this.maxNumberOfFilesReached=!1,this.maxNumberOfFilesPassed=!1):(this.maxNumberOfFilesReached=this.files.length>=this.maxNumberOfFiles,this.maxNumberOfFilesPassed=this.files.length>this.maxNumberOfFiles);const r=this.hasError;this.hasError=this.maxNumberOfFilesPassed||this.error||null!==this.el.shadowRoot.querySelector(".ukg-upload-file-error"),!this.hasError&&r&&this.ukgUploadAllErrorsCleared.emit()}fileSizeUnit(r,e){const t=`FILE_SIZE_UNITS.${r.toUpperCase()}_UNIT.message`,o=(0,n.i)(this._t,t,"",{count:e}),s=(0,n.i)(this._t,t,"",{context:"abbr",count:e}),c=(0,n.i)(this._t,t,"",{context:"label",count:e});return o===s?o:`<abbr title="${c}">${s}</abbr>`}retryFile(r){this.processFile(r);const e=this.filesItems.get(r),t=this.getButton(e,"retry");t&&(t.disabled=!0)}clearFile(r){var e=this;return(0,i.Z)(function*(){var t,o;const s=(null===(t=e.fileError.get(r))||void 0===t?void 0:t.size)>0;null===(o=e.fileControllers.get(r))||void 0===o||o.abort(),yield e.dropzone.removeFile(r);const c=e.filesItems.get(r).nextElementSibling||e.filesItems.get(r).previousElementSibling;e.filesItems.delete(r),e.files=e.files.filter(a=>a!==r),e.uploadedFiles=e.uploadedFiles.filter(a=>a!==r),e.files=[...e.files],null!==c?Array.from(c.querySelectorAll("[slot=action]")).find(h=>"none"!==h.style.display)?.shadowRoot.querySelector("button").focus({preventScroll:!0}):e.dropzone.shadowRoot.querySelector("input[type=file]")?.focus({preventScroll:!0}),null!==e.maxNumberOfFiles&&e.files.length<=e.maxNumberOfFiles&&e.files.forEach(a=>{var h;(null===(h=e.fileError.get(a))||void 0===h?void 0:h.size)>0||e.processFile(a)}),e.updateInternalStates(),s&&(e.ukgUploadFileCleared.emit({file:r}),e.uploadFileClearedCallback())})()}deleteFile(r){var e=this;return(0,i.Z)(function*(){e.clearFile(r),e.ukgUploadFileRemoved.emit({file:r}),e.uploadFileRemovedCallback()})()}checkFile(r){var e=this;return(0,i.Z)(function*(){const t=yield e.checkSize(r),o=yield e.checkType(r),s=yield e.check(r,(c,a)=>e.attachError(r,c,a));return t&&o&&s})()}checkSize(r){var e=this;return(0,i.Z)(function*(){if(null===e.maxFileSize||r.size<=e.maxFileSize)return!0;const{value:t,unit:o}=(0,k.g)(e.maxFileSize),s=e.fileSizeUnit(o,t);return e.attachError(r,"fileTooBig",{message:(0,n.i)(e._t,"UPLOAD.FILE_TOO_BIG.message","",{count:t,unit:s}),allowRetry:!1}),!1})()}checkType(r){var e=this;return(0,i.Z)(function*(){return!!(0,n.ac)(r,e.accept)||(e.attachError(r,"fileTypeForbidden",{message:(0,n.i)(e._t,"UPLOAD.FILE_TYPE_ERROR.message","",{type:r.type,accept:e.accept}),allowRetry:!1}),!1)})()}createImageUrl(r){return this.imageMap[r.name]||(this.imageMap[r.name]=URL.createObjectURL(r)),this.imageMap[r.name]}renderFilesList(){return this.files.length<=0?null:(0,l.h)("div",{class:"ukg-upload-list"},this.files.map((r,e)=>this.renderFile(r,e)))}renderFile(r,e){const t=`${this.id}-${e}`,o=`${this.id}${r.name}${r.size}${r.type}`,s=this.uploadedFiles.includes(r);return this._t=n.j.get("_t"),(0,l.h)("ukg-upload-file",{key:o,id:t,fileName:r.name,fileSize:r.size,fileType:r.type,thumbnailUrl:this.allowThumbnails&&r.type.includes("image")?this.createImageUrl(r):null,noIcon:this.noIcons,progressMessage:(0,n.i)(this._t,"UPLOAD.FILE_PROGRESSING.message")},(0,l.h)("ukg-button",{style:{display:"none"},disabled:this.disabled,slot:"action",id:`${t}-retry`,iconOnly:!0,size:"large",parentIcon:"refresh",onClick:()=>this.retryFile(r),"aria-label":(0,n.i)(this._t,"UPLOAD.RETRY.a11y","",{file:r.name}),tooltipText:this._t("UPLOAD.RETRY.message")}),(0,l.h)("ukg-button",{style:s?{}:{display:"none"},disabled:this.disabled,slot:"action",id:`${t}-delete`,iconOnly:!0,size:"large",parentIcon:"delete",onClick:()=>this.deleteFile(r),"aria-label":this._t("UPLOAD.DELETE.a11y",{file:r.name}),tooltipText:this._t("UPLOAD.DELETE.message")}),(0,l.h)("ukg-button",{style:s?{display:"none"}:{},disabled:this.disabled,slot:"action",id:`${t}-clear`,iconOnly:!0,size:"large",parentIcon:"close",onClick:()=>this.clearFile(r),"aria-label":this._t("UPLOAD.CLEAR.a11y",{file:r.name}),tooltipText:this._t("UPLOAD.CLEAR.message")}))}render(){return this._t=n.j.get("_t"),(0,l.h)(l.a,{role:"group",class:{"ukg-has-error":this.hasError}},(0,l.h)("div",{class:{"ukg-upload":!0,"ukg-upload-error":this.error||this.maxNumberOfFilesPassed}},(0,l.h)("ukg-dropzone",{ref:r=>this.dropzone=r,largeHeight:this.largeHeight,disabled:this.disabled,name:this.name,icon:this.icon,accept:this.accept,multiple:null===this.maxNumberOfFiles||this.maxNumberOfFiles>1,readOnly:this.maxNumberOfFilesReached,readOnlyMessage:(0,n.i)(this._t,"UPLOAD.MAX_NUMBER_OF_FILES_REACHED.message"),inputAriaDescribedby:this.inputAriaDescribedby}),(0,l.h)("slot",null),this.renderFilesList()),this.maxNumberOfFilesPassed&&(0,l.h)("ukg-assistive-message",{type:"error"},(0,n.i)(this._t,"UPLOAD.MAX_NUMBER_OF_FILES_PASSED.message","",{count:this.maxNumberOfFiles})),(0,l.h)("slot",{name:"assistive"}))}get el(){return(0,l.g)(this)}};_.style=":host(.ukg-color-brand){--ukg-color-base:var(--ukg-color-brand, #005151);--ukg-color-base-rgb:var(--ukg-color-brand-rgb, 0, 81, 81);--ukg-color-contrast:var(--ukg-color-brand-contrast, #fff);--ukg-color-contrast-rgb:var(--ukg-color-brand-contrast-rgb, 255, 255, 255);--ukg-color-shade:var(--ukg-color-brand-shade, #004747);--ukg-color-tint:var(--ukg-color-brand-tint, #1a6262)}:host(.ukg-color-action){--ukg-color-base:var(--ukg-color-action, #0176B2);--ukg-color-base-rgb:var(--ukg-color-action-rgb, 1, 118, 178);--ukg-color-contrast:var(--ukg-color-action-contrast, #fff);--ukg-color-contrast-rgb:var(--ukg-color-action-contrast-rgb, 255, 255, 255);--ukg-color-shade:var(--ukg-color-action-shade, #01689d);--ukg-color-tint:var(--ukg-color-action-tint, #1a84ba)}:host(.ukg-color-important){--ukg-color-base:var(--ukg-color-important, #DC0C22);--ukg-color-base-rgb:var(--ukg-color-important-rgb, 220, 12, 34);--ukg-color-contrast:var(--ukg-color-important-contrast, #fff);--ukg-color-contrast-rgb:var(--ukg-color-important-contrast-rgb, 255, 255, 255);--ukg-color-shade:var(--ukg-color-important-shade, #c20b1e);--ukg-color-tint:var(--ukg-color-important-tint, #e02438)}:host(.ukg-color-medium){--ukg-color-base:var(--ukg-color-medium, #F5F5F5);--ukg-color-base-rgb:var(--ukg-color-medium-rgb, 245, 245, 245);--ukg-color-contrast:var(--ukg-color-medium-contrast, #fff);--ukg-color-contrast-rgb:var(--ukg-color-medium-contrast-rgb, 255, 255, 255);--ukg-color-shade:var(--ukg-color-medium-shade, #d8d8d8);--ukg-color-tint:var(--ukg-color-medium-tint, #f6f6f6)}:host(.ukg-color-success){--ukg-color-base:var(--ukg-color-success, #008060);--ukg-color-base-rgb:var(--ukg-color-success-rgb, 0, 128, 96);--ukg-color-contrast:var(--ukg-color-success-contrast, #fff);--ukg-color-contrast-rgb:var(--ukg-color-success-contrast-rgb, 255, 255, 255);--ukg-color-shade:var(--ukg-color-success-shade, #007154);--ukg-color-tint:var(--ukg-color-success-tint, #1a8d70)}:host(.ukg-color-warning){--ukg-color-base:var(--ukg-color-warning, #CC7300);--ukg-color-base-rgb:var(--ukg-color-warning-rgb, 204, 115, 0);--ukg-color-contrast:var(--ukg-color-warning-contrast, #fff);--ukg-color-contrast-rgb:var(--ukg-color-warning-contrast-rgb, 255, 255, 255);--ukg-color-shade:var(--ukg-color-warning-shade, #b46500);--ukg-color-tint:var(--ukg-color-warning-tint, #d1811a)}*::-webkit-scrollbar{width:16px;height:16px}*::-webkit-scrollbar-thumb{border:5px solid rgba(0, 0, 0, 0);background-clip:padding-box;border-radius:50em;background-color:rgba(0, 0, 0, 0.42)}*::-webkit-scrollbar-thumb:vertical:hover{background-color:rgba(0, 0, 0, 0.57)}*::-webkit-scrollbar-thumb:vertical:active{background-color:rgba(0, 0, 0, 0.72)}*::-webkit-scrollbar-thumb:horizontal:hover{background-color:rgba(0, 0, 0, 0.57)}*::-webkit-scrollbar-thumb:horizontal:active{background-color:rgba(0, 0, 0, 0.72)}*.ukg_sys_helper_scrollbarShowOnHover::-webkit-scrollbar-thumb{background-color:rgba(0, 0, 0, 0)}*.ukg_sys_helper_scrollbarShowOnHover:hover::-webkit-scrollbar-thumb{background-color:rgba(0, 0, 0, 0.42)}*.ukg_sys_helper_scrollbarShowOnHover:hover::-webkit-scrollbar-thumb:vertical:hover{background-color:rgba(0, 0, 0, 0.57)}*.ukg_sys_helper_scrollbarShowOnHover:hover::-webkit-scrollbar-thumb:vertical:active{background-color:rgba(0, 0, 0, 0.72)}*.ukg_sys_helper_scrollbarShowOnHover:hover::-webkit-scrollbar-thumb:horizontal:hover{background-color:rgba(0, 0, 0, 0.57)}*.ukg_sys_helper_scrollbarShowOnHover:hover::-webkit-scrollbar-thumb:horizontal:active{background-color:rgba(0, 0, 0, 0.72)}*.ukg_sys_helper_scrollbarDark::-webkit-scrollbar-thumb{background-color:rgba(255, 255, 255, 0.43)}*.ukg_sys_helper_scrollbarDark::-webkit-scrollbar-thumb:vertical:hover{background-color:rgba(255, 255, 255, 0.58)}*.ukg_sys_helper_scrollbarDark::-webkit-scrollbar-thumb:vertical:active{background-color:rgba(255, 255, 255, 0.73)}*.ukg_sys_helper_scrollbarDark::-webkit-scrollbar-thumb:horizontal:hover{background-color:rgba(255, 255, 255, 0.58)}*.ukg_sys_helper_scrollbarDark::-webkit-scrollbar-thumb:horizontal:active{background-color:rgba(255, 255, 255, 0.73)}*.ukg_sys_helper_scrollbarDark.ukg_sys_helper_scrollbarShowOnHover::-webkit-scrollbar-thumb{background-color:rgba(255, 255, 255, 0)}*.ukg_sys_helper_scrollbarDark.ukg_sys_helper_scrollbarShowOnHover:hover::-webkit-scrollbar-thumb{background-color:rgba(255, 255, 255, 0.43)}*.ukg_sys_helper_scrollbarDark.ukg_sys_helper_scrollbarShowOnHover:hover::-webkit-scrollbar-thumb:vertical:hover{background-color:rgba(255, 255, 255, 0.58)}*.ukg_sys_helper_scrollbarDark.ukg_sys_helper_scrollbarShowOnHover:hover::-webkit-scrollbar-thumb:vertical:active{background-color:rgba(255, 255, 255, 0.73)}*.ukg_sys_helper_scrollbarDark.ukg_sys_helper_scrollbarShowOnHover:hover::-webkit-scrollbar-thumb:horizontal:hover{background-color:rgba(255, 255, 255, 0.58)}*.ukg_sys_helper_scrollbarDark.ukg_sys_helper_scrollbarShowOnHover:hover::-webkit-scrollbar-thumb:horizontal:active{background-color:rgba(255, 255, 255, 0.73)}:host{display:block;text-align:left}.ukg-upload{padding:0.25rem;-webkit-box-shadow:inset 0 0 0 1px var(--ukg_sys_color_divider_onLight, rgba(0, 0, 0, 0.15));box-shadow:inset 0 0 0 1px var(--ukg_sys_color_divider_onLight, rgba(0, 0, 0, 0.15));border-radius:calc(0.375rem + 3px);margin-bottom:0.5rem}.ukg-upload-error{-webkit-box-shadow:inset 0 0 0 2px var(--ukg_sys_color_important, #DC0C22);box-shadow:inset 0 0 0 2px var(--ukg_sys_color_important, #DC0C22)}.ukg-upload-list>ukg-upload-file:not(:last-of-type){border-bottom:1px solid var(--ukg_sys_color_divider_onLight, rgba(0, 0, 0, 0.15))}"}}]);